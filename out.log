dd if=/dev/zero of=hdd.img bs=1M count=16 2>/dev/null
dd if=build/boot.bin   of=hdd.img conv=notrunc 2>/dev/null
dd if=build/stage2.bin of=hdd.img bs=512 seek=1 conv=notrunc 2>/dev/null
/opt/homebrew/opt/socket_vmnet/bin/socket_vmnet_client /opt/homebrew/var/run/socket_vmnet \
	qemu-system-x86_64 -m 4G -drive file=hdd.img,format=raw,if=ide -no-reboot -monitor none -serial stdio \
		-d cpu_reset,int,guest_errors -D qemu-debug.log -netdev socket,id=n0,fd=3 -object filter-dump,id=n0dump,netdev=n0,queue=all,file=qemu-net.pcap -device rtl8139,netdev=n0,mac=52:54:00:12:34:56
B.........JSPpLcdeBPIC masks: PIC1=0xFD PIC2=0xFF irq=01
kIDT base pre-init=
0000000000000000

Hardware summary:
  CPU: QEMU Virtual CPU version 2.5+
  CPU Vendor: AuthenticAMD
  RAM: 4095 MiB usable / 16383 MiB total (E820 entries: 8)
  PCI devices:
    00:00.0 vendor 0x8086 device 0x1237 class 06/00/00
    00:01.0 vendor 0x8086 device 0x7000 class 06/01/00
    00:01.1 vendor 0x8086 device 0x7010 class 01/01/80
    00:01.3 vendor 0x8086 device 0x7113 class 06/80/00
    00:02.0 vendor 0x1234 device 0x1111 class 03/00/00
    00:03.0 vendor 0x10EC device 0x8139 class 02/00/00

hvQ0000000002000020
fIDT alloc request
IDT alloc ptr=
00000000020000B0
IDT memset ptr=
00000000020000B0
IPIC masks: PIC1=0xFE PIC2=0xFF irq=00
TPIC masks: PIC1=0xFA PIC2=0xF7 irq=0B
rtl8139: found at bus 00 device 03 function 00 io=0xC000
rtl8139: mac 52:54:00:12:34:56
rtl8139: regs[after init] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
NmErtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
eIn-memory FS shell ready. Commands: echo, cat, mkdir, ls, ip, ping, nslookup, wget, imgview, sha1sum, dhclient, start_video, alloc1m, free.
alex@alix$ rtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
rtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
rtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
rtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
rtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
rtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
rtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
rtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
rtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
rtl8139: regs[rx poll] CR=0x0D RCR=0x0000078A CAPR=0xFFF0 CBR=0x0000 ISR=0x0000 IMR=0x000F MSR=0xD0 TCR=0x74800000 TSAD0=0x00106B20
mouse_poll draining keyboard status=0x1D data=0x1F
smouse_poll draining keyboard status=0x1D data=0x14
tmouse_poll draining keyboard status=0x1D data=0x94
mouse_poll draining keyboard status=0x1D data=0x1E
amouse_poll draining keyboard status=0x1D data=0x9E
tmouse_poll draining keyboard status=0x1D data=0x94
 rmouse_poll draining keyboard status=0x1D data=0x14
tmouse_poll draining keyboard status=0x1D data=0x93
_id  video
Starting video mode...
VGA state captured
VGA font captured
mouse_init: enabling aux port
mouse_init: streaming enabled
irq12 status=0x1C
PIC masks: PIC1=0xFA PIC2=0xE7 irq=0C
Detected BGA framebuffer BAR: 0x00000000FD000000
Framebuffer phys base: 0x00000000FD000000
BGA detected, configuring mode
BGA XRES readback: 0x0000000000000500
BGA YRES readback: 0x0000000000000400
BGA BPP readback: 0x0000000000000010
mouse debug counter reset
video mode enabled, preparing scene
Sample pixel mid-screen: 0x000000000000FC04
cursor drawn, entering loop
Video mode active. Double-click to exit.
video_run_loop start
mouse_poll draining keyboard status=0x1D data=0x9C
irq12 status=0x3D
irq12 data=0x08
mouse irq byte=0x08
irq12 status=0x3D
irq12 data=0x00
mouse irq byte=0x00
irq12 status=0x3D
irq12 data=0x00
mouse irq byte=0x00
mouse packet dx=0000000000000000 dy=0000000000000000 left=0
mouse movement detected in video
mouse event dx=+00 dy=+00 left=0
irq12 status=0x3D
irq12 data=0x08
mouse irq byte=0x08
irq12 status=0x3D
irq12 data=0x00
mouse irq byte=0x00
irq12 status=0x3D
irq12 data=0x00
mouse irq byte=0x00
mouse packet dx=0000000000000000 dy=0000000000000000 left=0
mouse event dx=+00 dy=+00 left=0
irq12 status=0x3D
irq12 data=0x18
mouse irq byte=0x18
irq12 status=0x3D
irq12 data=0xFF
mouse irq byte=0xFF
irq12 status=0x3D
irq12 data=0x04
mouse irq byte=0x04
mouse packet dx=FFFFFFFFFFFFFFFF dy=0000000000000004 left=0
mouse event dx=-01 dy=-04 left=0
irq12 status=0x3D
irq12 data=0x18
mouse irq byte=0x18
irq12 status=0x3D
irq12 data=0xFC
mouse irq byte=0xFC
irq12 status=0x3D
irq12 data=0x06
mouse irq byte=0x06
mouse packet dx=FFFFFFFFFFFFFFFC dy=0000000000000006 left=0
mouse event dx=-04 dy=-06 left=0
irq12 status=0x3D
irq12 data=0x18
mouse irq byte=0x18
irq12 status=0x3D
irq12 data=0xFD
mouse irq byte=0xFD
irq12 status=0x3D
irq12 data=0x06
mouse irq byte=0x06
mouse packet dx=FFFFFFFFFFFFFFFD dy=0000000000000006 left=0
mouse event dx=-03 dy=-06 left=0
mouse irq byte=0x18
mouse irq byte=0xFC
mouse irq byte=0x06
mouse packet dx=FFFFFFFFFFFFFFFC dy=0000000000000006 left=0
mouse event dx=-04 dy=-06 left=0
mouse irq byte=0x18
mouse irq byte=0xF8
mouse irq byte=0x0E
mouse packet dx=FFFFFFFFFFFFFFF8 dy=000000000000000E left=0
mouse event dx=-08 dy=-14 left=0
mouse irq byte=0x18
mouse irq byte=0xF8
mouse irq byte=0x0F
mouse packet dx=FFFFFFFFFFFFFFF8 dy=000000000000000F left=0
mouse event dx=-08 dy=-15 left=0
mouse irq byte=0x18
mouse irq byte=0xF7
mouse irq byte=0x11
mouse packet dx=FFFFFFFFFFFFFFF7 dy=0000000000000011 left=0
mouse event dx=-09 dy=-17 left=0
mouse irq byte=0x18
mouse irq byte=0xF4
mouse irq byte=0x13
mouse packet dx=FFFFFFFFFFFFFFF4 dy=0000000000000013 left=0
mouse event dx=-12 dy=-19 left=0
mouse irq byte=0x18
mouse irq byte=0xF6
mouse packet dx=FFFFFFFFFFFFFFF6 dy=0000000000000012 left=0
mouse event dx=-10 dy=-18 left=0
mouse packet dx=FFFFFFFFFFFFFFF1 dy=0000000000000016 left=0
mouse event dx=-15 dy=-22 left=0
mouse packet dx=FFFFFFFFFFFFFFF0 dy=0000000000000016 left=0
mouse event dx=-16 dy=-22 left=0
mouse packet dx=FFFFFFFFFFFFFFDF dy=0000000000000031 left=0
mouse event dx=-33 dy=-49 left=0
mouse packet dx=FFFFFFFFFFFFFFDE dy=0000000000000031 left=0
mouse event dx=-34 dy=-49 left=0
mouse packet dx=FFFFFFFFFFFFFFF1 dy=0000000000000015 left=0
mouse event dx=-15 dy=-21 left=0
mouse_poll draining keyboard status=0x1D data=0x12
mouse_poll draining keyboard status=0x1D data=0x92
mouse_poll draining keyboard status=0x1D data=0x2E
mouse_poll draining keyboard status=0x1D data=0xAE
mouse_poll draining keyboard status=0x1D data=0x23
mouse_poll draining keyboard status=0x1D data=0x18
mouse_poll draining keyboard status=0x1D data=0xA3
dhcp: starting discovery on interface rtl0
dhcp: transmitting message type 1
rtl8139: frame[slot=00] len=0x0123 data=FF FF FF FF FF FF 52 54 00 12 34 56 08 00 45 00
rtl8139: 01 15 00 00 00 00 40 11 79 D9 00 00 00 00 FF FF
rtl8139: FF FF 00 44 00 43 01 01 90 CF 01 01 06 00 13 36
rtl8139: 59 7C 00 00 80 00 00 00 00 00 00 00 00 00 00 00
rtl8139: irq status=0x0004
rtl8139: tx ok
dhcp: discover sent
rtl8139: irq status=0x0001
dhcp: received response type=2 yiaddr=192.168.105.2
rtl8139: frame[slot=01] len=0x003C data=FF FF FF FF FF FF 52 54 00 12 34 56 08 06 00 01
rtl8139: 08 00 06 04 00 01 52 54 00 12 34 56 00 00 00 00
rtl8139: 00 00 00 00 00 00 C0 A8 69 01 00 00 00 00 00 00
rtl8139: 00 00 00 00 00 00 00 00 00 00 00 00
arp: request sent for 192.168.105.1
dhcp: transmitting message type 3
rtl8139: frame[slot=02] len=0x012F data=AE 07 75 80 31 64 52 54 00 12 34 56 08 00 45 00
rtl8139: 01 21 00 00 00 00 40 11 50 23 00 00 00 00 C0 A8
rtl8139: 69 01 00 44 00 43 01 0D 87 52 01 01 06 00 13 36
rtl8139: 59 7C 00 00 00 00 00 00 00 00 00 00 00 00 00 00
rtl8139: frame[slot=03] len=0x003C data=FF FF FF FF FF FF 52 54 00 12 34 56 08 06 00 01
rtl8139: 08 00 06 04 00 01 52 54 00 12 34 56 C0 A8 69 02
rtl8139: 00 00 00 00 00 00 C0 A8 69 02 00 00 00 00 00 00
rtl8139: 00 00 00 00 00 00 00 00 00 00 00 00
dhcp: sent request
rtl8139: frame[slot=00] len=0x003C data=FF FF FF FF FF FF 52 54 00 12 34 56 08 06 00 01
rtl8139: 08 00 06 04 00 01 52 54 00 12 34 56 C0 A8 69 02
rtl8139: 00 00 00 00 00 00 C0 A8 69 02 00 00 00 00 00 00
rtl8139: 00 00 00 00 00 00 00 00 00 00 00 00
rtl8139: rx frame eth_type=0x0806 len=0x002A
arp: store request ip=192.168.105.1
arp: added entry ip=192.168.105.1 mac=AE0775803164
arp: store new index=0
arp: handle_frame early exit: opcode reply, no response needed
dhcp: received response type=5 yiaddr=192.168.105.2
rtl8139: frame[slot=01] len=0x003C data=FF FF FF FF FF FF 52 54 00 12 34 56 08 06 00 01
rtl8139: 08 00 06 04 00 01 52 54 00 12 34 56 C0 A8 69 02
rtl8139: 00 00 00 00 00 00 C0 A8 69 02 00 00 00 00 00 00
rtl8139: 00 00 00 00 00 00 00 00 00 00 00 00
rtl8139: frame[slot=02] len=0x003C data=FF FF FF FF FF FF 52 54 00 12 34 56 08 06 00 01
rtl8139: 08 00 06 04 00 01 52 54 00 12 34 56 C0 A8 69 02
rtl8139: 00 00 00 00 00 00 C0 A8 69 01 00 00 00 00 00 00
rtl8139: 00 00 00 00 00 00 00 00 00 00 00 00
arp: request sent for 192.168.105.1
dns: set_servers: added = 192.168.105.1
dns: set_servers: total=1
dhcp: lease acquired. address=192.168.105.2 netmask=255.255.255.0 gateway=192.168.105.1
rtl8139: rx frame eth_type=0x0806 len=0x002A
arp: store request ip=192.168.105.1
arp: added entry ip=192.168.105.1 mac=AE0775803164
arp: store new index=0
arp: handle_frame early exit: opcode reply, no response needed
rtl8139: irq status=0x0005
rtl8139: tx ok
arp: cache hit ip=192.168.105.1 mac=AE0775803164
icmp: send echo id=0x0ABD seq=0x0001 target=8.8.8.8 mac=AE0775803164 len=74
icmp: frame data=AE 07 75 80 31 64 52 54 00 12 34 56 08 00 45 00
icmp: frame data=00 3C 00 00 00 00 40 01 41 07 C0 A8 69 02 08 08
icmp: frame data=08 08 08 00 FC 40 0A BD 00 01 00 01 02 03 04 05
icmp: frame data=06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15
rtl8139: frame[slot=03] len=0x004A data=AE 07 75 80 31 64 52 54 00 12 34 56 08 00 45 00
rtl8139: 00 3C 00 00 00 00 40 01 41 07 C0 A8 69 02 08 08
rtl8139: 08 08 08 00 FC 40 0A BD 00 01 00 01 02 03 04 05
rtl8139: 06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15
rtl8139: irq status=0x0004
rtl8139: tx ok
icmp: send queued
rtl8139: irq status=0x0001
rtl8139: rx frame eth_type=0x0800 len=0x004A
rtl8139: ip proto=0x0001
icmp: reply from 8.8.8.8 bytes=40
arp: cache hit ip=192.168.105.1 mac=AE0775803164
icmp: send echo id=0x0BCF seq=0x0001 target=8.8.8.8 mac=AE0775803164 len=74
icmp: frame data=AE 07 75 80 31 64 52 54 00 12 34 56 08 00 45 00
icmp: frame data=00 3C 00 00 00 00 40 01 41 07 C0 A8 69 02 08 08
icmp: frame data=08 08 08 00 FB 2E 0B CF 00 01 00 01 02 03 04 05
icmp: frame data=06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15
rtl8139: frame[slot=00] len=0x004A data=AE 07 75 80 31 64 52 54 00 12 34 56 08 00 45 00
rtl8139: 00 3C 00 00 00 00 40 01 41 07 C0 A8 69 02 08 08
rtl8139: 08 08 08 00 FB 2E 0B CF 00 01 00 01 02 03 04 05
rtl8139: 06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15
rtl8139: irq status=0x0004
rtl8139: tx ok
icmp: send queued
rtl8139: irq status=0x0001
rtl8139: rx frame eth_type=0x0800 len=0x004A
rtl8139: ip proto=0x0001
icmp: reply from 8.8.8.8 bytes=40
arp: cache hit ip=192.168.105.1 mac=AE0775803164
icmp: send echo id=0x0D90 seq=0x0001 target=8.8.8.8 mac=AE0775803164 len=74
icmp: frame data=AE 07 75 80 31 64 52 54 00 12 34 56 08 00 45 00
icmp: frame data=00 3C 00 00 00 00 40 01 41 07 C0 A8 69 02 08 08
icmp: frame data=08 08 08 00 F9 6D 0D 90 00 01 00 01 02 03 04 05
icmp: frame data=06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15
rtl8139: frame[slot=01] len=0x004A data=AE 07 75 80 31 64 52 54 00 12 34 56 08 00 45 00
rtl8139: 00 3C 00 00 00 00 40 01 41 07 C0 A8 69 02 08 08
rtl8139: 08 08 08 00 F9 6D 0D 90 00 01 00 01 02 03 04 05
rtl8139: 06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15
rtl8139: irq status=0x0004
rtl8139: tx ok
icmp: send queued
rtl8139: irq status=0x0001
rtl8139: rx frame eth_type=0x0800 len=0x004A
rtl8139: ip proto=0x0001
icmp: reply from 8.8.8.8 bytes=40
arp: cache hit ip=192.168.105.1 mac=AE0775803164
icmp: send echo id=0x0F1C seq=0x0001 target=8.8.8.8 mac=AE0775803164 len=74
icmp: frame data=AE 07 75 80 31 64 52 54 00 12 34 56 08 00 45 00
icmp: frame data=00 3C 00 00 00 00 40 01 41 07 C0 A8 69 02 08 08
icmp: frame data=08 08 08 00 F7 E1 0F 1C 00 01 00 01 02 03 04 05
icmp: frame data=06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15
rtl8139: frame[slot=02] len=0x004A data=AE 07 75 80 31 64 52 54 00 12 34 56 08 00 45 00
rtl8139: 00 3C 00 00 00 00 40 01 41 07 C0 A8 69 02 08 08
rtl8139: 08 08 08 00 F7 E1 0F 1C 00 01 00 01 02 03 04 05
rtl8139: 06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15
rtl8139: irq status=0x0004
rtl8139: tx ok
icmp: send queued
rtl8139: irq status=0x0001
rtl8139: rx frame eth_type=0x0800 len=0x004A
rtl8139: ip proto=0x0001
icmp: reply from 8.8.8.8 bytes=40
